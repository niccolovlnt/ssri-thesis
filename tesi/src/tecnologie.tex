\chapter{Tecnologie utilizzate}
\label{cap:tecnologie}

Questo capitolo è dedicato alla descrizione delle tecnologie e degli strumenti utilizzati per svolgere il progetto di tesi, in particolare per lo sviluppo delle sonde di assurance: delle applicazioni che tramite il framework Moon Cloud verificano la conformità di servizi e infrastrutture ICT in base a benchmark di sicurezza e best practice. Si analizzano i linguaggi di programmazione, le librerie e i framework adottati, nonché le metodologie di sviluppo seguite. 


\section{Python}
\label{sec:python}

Python è un linguaggio di programmazione ad alto livello, interpretato e orientato agli oggetti. È ampiamente utilizzato per lo sviluppo di applicazioni web, automazione, analisi dei dati e machine learning. Durante lo sviluppo delle sonde, Python è stato scelto per la sua versatilità e compatibilità con molteplici librerie, tra cui quella per interfacciarsi con AWS.

\subsection{Boto3}
\label{sec:boto3}

Boto3 è la libreria ufficiale di AWS per Python, che consente di interagire con i servizi AWS in modo semplice ed efficiente. Boto3 fornisce un'interfaccia intuitiva per accedere alle API di AWS e gestire le risorse cloud. Permette di creare un client per ciascun servizio AWS e di eseguire operazioni come la creazione, la modifica e l'eliminazione di risorse, nonostante per la verifica di conformità ai benchmark CIS siano sufficienti permessi di sola lettura. Per accedere a un servizio AWS, è necessario fornire le credenziali di accesso (\textit{Access Key} e \textit{Secret Key}) e la regione in cui si desidera operare. Un esempio di utilizzo di Boto3 è la creazione di un client per Amazon S3 ed elencare tutti i buckets presenti nella regione specificata sul determinato account.

\begin{lstlisting}[style=mypython, caption={Esempio di utilizzo di Boto3 per elencare i bucket S3}]
import boto3

s3 = boto3.client (
's3',
aws_access_key_id="YOUR_ACCESS_KEY",
aws_secret_access_key="YOUR_SECRET_KEY",
region_name="YOUR_REGION"
)

s3.list_buckets()
\end{lstlisting}

\section{Docker}
\label{sec:docker}

Docker è una piattaforma di containerizzazione che consente di creare, distribuire ed eseguire applicazioni in ambienti isolati chiamati container. Permette inoltre di generare \textbf{immagini} di applicazioni e servizi, eseguibili su qualsiasi sistema che supporti Docker, garantendo coerenza tra gli ambienti di sviluppo, test e produzione. Le immagini contengono tutto il necessario per far funzionare un'applicazione: codice, librerie, dipendenze e configurazioni. Durante lo sviluppo delle sonde di assurance, Docker è stato utilizzato per creare le immagini delle applicazioni, che vengono poi eseguite su Moon Cloud. Ogni immagine Docker viene costruita a partire da un file chiamato \textbf{Dockerfile}, che descrive in modo dettagliato tutti i passaggi necessari a configurare l'ambiente di esecuzione. In questo modo, una volta scritta una sonda e generata l'immagine corrispondente, è possibile eseguirla su Moon Cloud direttamente, senza ulteriori modifiche.

\section{GitLab}
\label{sec:gitlab}

GitLab è una piattaforma di gestione del codice sorgente che consente di ospitare repository Git, gestire progetti e ospitare pipeline di \textbf{Continuous Integration/Continuous Deployment} (CI/CD). Il framework Moon Cloud ospita un proprio deployment di GitLab, che consente di gestire il codice sorgente delle sonde di assurance e di automatizzare il processo di build dell'immagine Docker. Le pipeline CI/CD sono configurate per eseguire automaticamente i test e costruire l'immagine Docker della sonda, rendendola disponibile per l'esecuzione su Moon Cloud. In questo modo, ogni volta che viene apportata una modifica al codice sorgente della sonda, la pipeline si occupa di ricostruire l'immagine e renderla disponibile per l'esecuzione.

Ogni sonda prodotta viene inserita in un repository GitLab dedicato, che contiene il codice sorgente, i file necessari per la configurazione della sonda e le pipeline CI/CD, il README con la documentazione della sonda. 

\section{Moon Cloud}
\label{sec:Moon Cloud}

Moon Cloud \cite{8647247} è un framework per la valutazione di conformità e assurance di applicazioni o infrastrutture ICT che permette di avere una verifica completa dei servizi durante il loro ciclo di vita. Si concentra prevalentemente su security, AI e machine learning assurance.

Le sonde di assurance sono sviluppate per essere eseguite su Moon Cloud, che fornisce un \textbf{driver} che defisce struttura e funzionalità delle sonde. Si tratta di una macchina a stati finiti con due principali flow di esecuzione: \textbf{forward} e \textbf{rollback}. Il flow forward è il flusso principale di esecuzione della sonda, in cui vengono eseguiti i controlli di conformità e le azioni correttive. Il flow rollback viene eseguito in caso di errore o fallimento del flow forward, e consente di ripristinare lo stato precedente della sonda in caso il target sia stato modificato. La sonda prende in input dei parametri relativi al target di esecuzione e restituisce in output un risultato predefinito definito secondo un preciso schema arricchito poi dal programmatore.

Il ciclo di vita di una sonda su Moon Cloud inizia con la scrittura del codice sorgente: esso viene poi inserito in un repository Git che si occupa, tramite una pipeline CI/CD, di costruire l'immagine Docker della sonda e di renderla disponibile per l'esecuzione. Moon Cloud dispone di un \textbf{backend} che gestisce l'interazione tra la sonda e la dashboard, ovvero l'interfaccia utente che consente di configurare, gestire, eseguire le sonde. In questo modo, è possibile creare un \textbf{form} tramite JSON schema per la configurazione di ciò che la sonda dovrebbe ricevere in input quando eseguita sulla dashboard. Si differenziano \textbf{Control} e \textbf{Abstract Evaluation Rule};
il primo si occupa di definire:

\begin{itemize}
    \item \textbf{Nome} della sonda;
    \item \textbf{Driver} della sonda, ovvero il link GitLab che identifica l'immagine Docker della sonda;
    \item \textbf{Metadata}, ovvero il form che definisce i parametri di input della sonda secondo un JSON schema;
    \item \textbf{Category} della sonda;
    \item \textbf{Supported Interval}, ovvero la frequenza con cui la sonda può essere eseguita;
    \item \textbf{Cred Type}: diverse sonde possono richiedere credenziali di accesso differenti, dalla più semplice coppia \textit{username-password} a chiavi SSH o Git login;
\end{itemize}

In questo modo si definisce la sonda e le sue caratteristiche, per renderla disponibile per l'esecuzione. L'Abstract Evaluation Rule, invece, si occupa di presentare la sonda all'interno della dashboard, definendo:

\begin{itemize}
    \item \textbf{Nome} della sonda;
    \item \textbf{Immagine} della sonda, ovvero il logo che appare nella dashboard;
    \item \textbf{Descrizione}
    \item \textbf{Category} della sonda;
    \item \textbf{Formula}, ovvero il tag numerico progressivo del controllo che identifica la sonda;
    \item \textbf{Related Controls}, ovvero i controlli prima definiti che sono correlati a questa sonda;
    \item \textbf{Owner} della sonda;
    \item \textbf{isPublic}, ovvero se la sonda è pubblica o privata;
\end{itemize}

Una volta che la sonda è stata definita nel backend e l'immagine Docker è stata costruita, è possibile eseguirla sulla dashboard di Moon Cloud. La dashboard consente di creare zone e target di esecuzione, ovvero le istanze o i servizi su cui si desidera eseguire delle sonde; definire credenziali di accesso per i target e da ultimo aggiungere ed eseguire \textbf{evaluations}, ovvero le sonde di assurance. I risultati sono mostrati sia tramite sommario con grafici e percentuali di conformità, sia tramite un log dettagliato che mostra l'esito di ogni singola sonda. 